public class ChallengeVI {
    public static void newAccounts(Integer n) {
        List<Account> newAccountsList = new List<Account>();
        
        for (Integer i=0; i<n; i++) {
            Account newAcc = new Account();
            newAcc.Name = 'Account' + i;
            newAcc.AnnualRevenue = 1234 + i;
            newAcc.Phone = '4445556666';
            newAcc.Site ='www.' + newAcc.Name + '.com';
            newAccountsList.add(newAcc);    
        }
        insert newAccountsList;
        newContacts(newAccountsList);
    }
    
    public static void newContacts(List<Account> accList) {
        List<Contact> accContactsList = new List<contact>();
        for(Account a : accList) {
            Contact c = new Contact();
             c.LastName = a.Name + 'Corpman';
             c.FirstName = 'bob';
             c.Phone = '1112223333';
             c.Email = c.FirstName + '@' + a.Name + '.com';
             c.AccountId = a.Id;
             accContactsList.add(c);
        }
        insert accContactsList;      
    }
    
    Public static void updateContacts() {
        List<Account> accList = [SELECT phone, (SELECT Id, phone FROM Contacts) FROM Account];
        List<Contact> conList = new List<Contact>();
        for (Account a : accList) {
            if (a.Contacts != null) {
                List<Contact> curContacts = a.Contacts;
                for (Contact c : curContacts) {
                    c.Phone = a.Phone;
                    conList.add(c);
                }        
           }
       }
       update conList; 
   }
   
    public static void systemLog() {
        for (Contact c : [SELECT FirstName, LastName, Account.Name, Account.Phone, Account.Site FROM Contact]) {
            System.debug(c.FirstName + ' ' + c.LastName + ',From: ' + c.Account.Name + '.Reachable at: ' + c.Account.Phone + 'and ' + c.Account.Site);
        }
    }
}